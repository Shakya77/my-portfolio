import{c as d,j as t,u as Q,r as c,a as y}from"./app-But5Qnzp.js";import{b as T,a as h,B as o}from"./createLucideIcon-BnW2hVvC.js";import{D as w,a as C,b as D,c as k,d as P,e as E}from"./dialog-CsZq48ki.js";import{I}from"./input-BGU8XaiE.js";import{L as f}from"./label-D1fp7Kq3.js";import{T as z}from"./textarea-DR7VeI3N.js";import{A as W}from"./app-layout-BD3c8sq9.js";/* empty css            */import"./x-fyHlKEjo.js";import"./index-rEQXx5zt.js";import"./index-BCXKywmT.js";import"./index-DrXu0r1a.js";import"./index-sgc0nMqv.js";const X=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Y=T("Pencil",X);const Z=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ee=T("Plus",Z);const te=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],se=T("Trash2",te);function le(i){const e=d.c(8);let l,s;e[0]!==i?({className:l,...s}=i,e[0]=i,e[1]=l,e[2]=s):(l=e[1],s=e[2]);let a;e[3]!==l?(a=h("w-full caption-bottom text-sm",l),e[3]=l,e[4]=a):a=e[4];let n;return e[5]!==s||e[6]!==a?(n=t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:a,...s})}),e[5]=s,e[6]=a,e[7]=n):n=e[7],n}function ae(i){const e=d.c(8);let l,s;e[0]!==i?({className:l,...s}=i,e[0]=i,e[1]=l,e[2]=s):(l=e[1],s=e[2]);let a;e[3]!==l?(a=h("[&_tr]:border-b",l),e[3]=l,e[4]=a):a=e[4];let n;return e[5]!==s||e[6]!==a?(n=t.jsx("thead",{"data-slot":"table-header",className:a,...s}),e[5]=s,e[6]=a,e[7]=n):n=e[7],n}function ne(i){const e=d.c(8);let l,s;e[0]!==i?({className:l,...s}=i,e[0]=i,e[1]=l,e[2]=s):(l=e[1],s=e[2]);let a;e[3]!==l?(a=h("[&_tr:last-child]:border-0",l),e[3]=l,e[4]=a):a=e[4];let n;return e[5]!==s||e[6]!==a?(n=t.jsx("tbody",{"data-slot":"table-body",className:a,...s}),e[5]=s,e[6]=a,e[7]=n):n=e[7],n}function H(i){const e=d.c(8);let l,s;e[0]!==i?({className:l,...s}=i,e[0]=i,e[1]=l,e[2]=s):(l=e[1],s=e[2]);let a;e[3]!==l?(a=h("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",l),e[3]=l,e[4]=a):a=e[4];let n;return e[5]!==s||e[6]!==a?(n=t.jsx("tr",{"data-slot":"table-row",className:a,...s}),e[5]=s,e[6]=a,e[7]=n):n=e[7],n}function x(i){const e=d.c(8);let l,s;e[0]!==i?({className:l,...s}=i,e[0]=i,e[1]=l,e[2]=s):(l=e[1],s=e[2]);let a;e[3]!==l?(a=h("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),e[3]=l,e[4]=a):a=e[4];let n;return e[5]!==s||e[6]!==a?(n=t.jsx("th",{"data-slot":"table-head",className:a,...s}),e[5]=s,e[6]=a,e[7]=n):n=e[7],n}function m(i){const e=d.c(8);let l,s;e[0]!==i?({className:l,...s}=i,e[0]=i,e[1]=l,e[2]=s):(l=e[1],s=e[2]);let a;e[3]!==l?(a=h("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),e[3]=l,e[4]=a):a=e[4];let n;return e[5]!==s||e[6]!==a?(n=t.jsx("td",{"data-slot":"table-cell",className:a,...s}),e[5]=s,e[6]=a,e[7]=n):n=e[7],n}function be({posts:i}){const{flash:e}=Q().props,[l,s]=c.useState(!1),[a,n]=c.useState(!1),[S,g]=c.useState(null),[B,p]=c.useState(!1),[b,N]=c.useState(null),{data:M,setData:$,post:O,processing:F,errors:u,reset:R}=y({title:"",content:""}),{data:L,setData:v,put:U,processing:A,errors:j,reset:V}=y({title:"",content:""}),_=r=>{r.preventDefault(),O(route("posts.store"),{onSuccess:()=>{s(!1),R()}})},q=r=>{r.preventDefault(),S&&U(route("posts.update",S.id),{onSuccess:()=>{n(!1),g(null),V()}})},G=r=>{N(r),p(!0)},J=()=>{if(!b)return;y({}).delete(route("posts.destroy",b.id),{onSuccess:()=>{p(!1),N(null)}})},K=r=>{g(r),v({title:r.title,content:r.content}),n(!0)};return c.useEffect(()=>{if(e?.success){const r=setTimeout(()=>{},3e3);return()=>clearTimeout(r)}},[e]),t.jsxs(W,{children:[t.jsx("div",{className:"py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e?.success&&t.jsx("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",children:e.success}),t.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Posts"}),t.jsxs(o,{onClick:()=>s(!0),children:[t.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create New Post"]})]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(le,{children:[t.jsx(ae,{children:t.jsxs(H,{children:[t.jsx(x,{children:"ID"}),t.jsx(x,{children:"Title"}),t.jsx(x,{children:"Content"}),t.jsx(x,{children:"Created At"}),t.jsx(x,{className:"text-right",children:"Actions"})]})}),t.jsx(ne,{children:i.map(r=>t.jsxs(H,{children:[t.jsx(m,{children:r.id}),t.jsx(m,{className:"font-medium",children:r.title}),t.jsxs(m,{children:[r.content.substring(0,50),"..."]}),t.jsx(m,{children:new Date(r.created_at).toLocaleDateString()}),t.jsxs(m,{className:"text-right",children:[t.jsx(o,{variant:"ghost",size:"sm",onClick:()=>K(r),className:"mr-2",children:t.jsx(Y,{className:"w-4 h-4"})}),t.jsx(o,{variant:"ghost",size:"sm",onClick:()=>G(r),className:"text-red-600 hover:text-red-700",children:t.jsx(se,{className:"w-4 h-4"})})]})]},r.id))})]})})]})})]})}),t.jsx(w,{open:l,onOpenChange:s,children:t.jsxs(C,{className:"sm:max-w-[425px]",children:[t.jsxs(D,{children:[t.jsx(k,{children:"Create New Post"}),t.jsx(P,{children:"Fill in the details below to create a new post."})]}),t.jsxs("form",{onSubmit:_,children:[t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(f,{htmlFor:"create-title",children:"Title"}),t.jsx(I,{id:"create-title",value:M.title,onChange:r=>$("title",r.target.value),placeholder:"Enter post title"}),u.title&&t.jsx("p",{className:"text-sm text-red-500",children:u.title})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(f,{htmlFor:"create-content",children:"Content"}),t.jsx(z,{id:"create-content",value:M.content,onChange:r=>$("content",r.target.value),placeholder:"Enter post content",rows:5}),u.content&&t.jsx("p",{className:"text-sm text-red-500",children:u.content})]})]}),t.jsxs(E,{children:[t.jsx(o,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(o,{type:"submit",disabled:F,children:F?"Creating...":"Create Post"})]})]})]})}),t.jsx(w,{open:a,onOpenChange:n,children:t.jsxs(C,{className:"sm:max-w-[425px]",children:[t.jsxs(D,{children:[t.jsx(k,{children:"Edit Post"}),t.jsx(P,{children:"Update the post details below."})]}),t.jsxs("form",{onSubmit:q,children:[t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(f,{htmlFor:"edit-title",children:"Title"}),t.jsx(I,{id:"edit-title",value:L.title,onChange:r=>v("title",r.target.value),placeholder:"Enter post title"}),j.title&&t.jsx("p",{className:"text-sm text-red-500",children:j.title})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(f,{htmlFor:"edit-content",children:"Content"}),t.jsx(z,{id:"edit-content",value:L.content,onChange:r=>v("content",r.target.value),placeholder:"Enter post content",rows:5}),j.content&&t.jsx("p",{className:"text-sm text-red-500",children:j.content})]})]}),t.jsxs(E,{children:[t.jsx(o,{type:"button",variant:"outline",onClick:()=>{n(!1),g(null)},children:"Cancel"}),t.jsx(o,{type:"submit",disabled:A,children:A?"Updating...":"Update Post"})]})]})]})}),t.jsx(w,{open:B,onOpenChange:p,children:t.jsxs(C,{className:"sm:max-w-[425px]",children:[t.jsxs(D,{children:[t.jsx(k,{children:"Delete Post"}),t.jsx(P,{children:"Are you sure you want to delete this post? This action cannot be undone."})]}),t.jsx("div",{className:"py-4",children:t.jsxs("p",{className:"text-sm text-gray-500",children:["Post: ",t.jsx("span",{className:"font-medium text-gray-900",children:b?.title})]})}),t.jsxs(E,{children:[t.jsx(o,{type:"button",variant:"outline",onClick:()=>{p(!1),N(null)},children:"Cancel"}),t.jsx(o,{type:"button",variant:"destructive",onClick:J,children:"Delete"})]})]})})]})}export{be as default};
